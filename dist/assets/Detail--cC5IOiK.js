import{j as s,r as n}from"./index-DF4vcbd5.js";import{S as x}from"./StatusBadge-BkFYEyyF.js";import{a as u}from"./index-t--hEgTQ.js";import{u as p,L as h}from"./App-BfSWe71o.js";const g=e=>!!e&&e.startsWith("http"),f="/images/placeholder.png",j=({urlFoto:e,nome:a})=>s.jsx("div",{className:"w-[320px] h-[320px] flex justify-center items-center overflow-hidden rounded-lg shadow-lg mx-auto",children:s.jsx("img",{src:g(e)?e:f,alt:a,className:"w-full h-full object-cover"})}),v=e=>e?new Date(e).toLocaleDateString("pt-BR"):"Data não informada",i=(e,a="Não informado")=>e&&e.trim()?e:a,b=({caseDetails:e})=>s.jsxs("div",{className:"space-y-5",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:e.nome}),s.jsxs("p",{className:"text-lg text-gray-600",children:[e.sexo," | Idade: ",e.idade]}),s.jsx(x,{isDesaparecido:!e.ultimaOcorrencia.encontradoVivo}),s.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Última Ocorrência"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Data do desaparecimento:"})," ",v(e.ultimaOcorrencia.dtDesaparecimento)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Local:"})," ",i(e.ultimaOcorrencia.localDesaparecimentoConcat)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Informações:"})," ",i(e.ultimaOcorrencia.ocorrenciaEntrevDesapDTO.informacao,"Nenhuma informação disponível")]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vestimentas:"})," ",i(e.ultimaOcorrencia.ocorrenciaEntrevDesapDTO.vestimentasDesaparecido)]})]})]}),N=e=>!!e&&e.startsWith("http"),w=({cartazes:e})=>s.jsx("div",{className:"flex flex-wrap gap-4",children:e.map((a,r)=>N(a.urlCartaz)?s.jsx("a",{href:a.urlCartaz,target:"_blank",rel:"noopener noreferrer",children:s.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm",children:["Ver Cartaz (",a.tipoCartaz,")"]})},r):null)}),y=()=>s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}),d=({message:e})=>s.jsx("div",{className:"text-center text-xl mt-10 text-red-500 font-semibold",children:e}),D="https://abitus-api.geia.vip/v1",C=async e=>{try{return(await u.get(`${D}/pessoas/${e}`)).data}catch(a){return console.error("Erro ao buscar detalhes do caso:",a),null}},E=e=>{const[a,r]=n.useState(null),[t,o]=n.useState(!0),[m,l]=n.useState(null);return n.useEffect(()=>{(async()=>{o(!0),l(null);const c=await C(e);c?r(c):l("Erro ao buscar detalhes do caso. Tente novamente."),o(!1)})()},[e]),{caseDetails:a,loading:t,error:m}},z=()=>{const{id:e}=p(),{caseDetails:a,loading:r,error:t}=E(e);if(r)return s.jsx(y,{});if(t)return s.jsx(d,{message:t});if(!a)return s.jsx(d,{message:"Não foi possível encontrar os detalhes dessa pessoa."});const o=!a.ultimaOcorrencia.encontradoVivo;return s.jsx("div",{className:"flex items-center justify-center bg-gray-100 min-h-screen px-4 py-6",children:s.jsxs("div",{className:"w-full max-w-4xl bg-white shadow-lg rounded-2xl p-6 md:p-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10 items-center",children:[s.jsx(j,{urlFoto:a.urlFoto,nome:a.nome}),s.jsx(b,{caseDetails:a})]}),o&&s.jsxs("div",{className:"mt-6 space-y-5",children:[s.jsx(h,{to:`/informar/${e}`,children:s.jsx("button",{className:"w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-all shadow-md font-semibold text-lg md:text-xl",children:"Informar sobre o desaparecido"})}),s.jsx(w,{cartazes:a.ultimaOcorrencia.listaCartaz})]})]})})};export{z as default};
