import{r as u,j as e}from"./index-DF4vcbd5.js";import{a as f}from"./index-t--hEgTQ.js";import{u as g}from"./App-BfSWe71o.js";const h=l=>{const[a,i]=u.useState({informacao:"",descricao:"",data:"",foto:null}),[c,s]=u.useState(!1),[m,d]=u.useState(null);return{formData:a,loading:c,error:m,handleChange:n=>{const{name:o,value:t}=n.target;i(r=>({...r,[o]:t}))},handleFileChange:n=>{const o=n.target.files?n.target.files[0]:null;i(t=>({...t,foto:o}))},handleSubmit:async n=>{var t;if(n.preventDefault(),!l){d("ID da ocorrência não fornecido.");return}s(!0);const o=new FormData;o.append("informacao",a.informacao),o.append("descricao",a.descricao),o.append("data",a.data),o.append("ocoId",l.toString()),a.foto&&o.append("files",a.foto);try{const r=await f.post("/v1/ocorrencias/informacoes-desaparecido",o,{headers:{"Content-Type":"multipart/form-data"}});console.log("Informações enviadas com sucesso:",r.data)}catch(r){console.error("Erro ao enviar informações:",r),f.isAxiosError(r)?(console.error("Detalhes do erro:",((t=r.response)==null?void 0:t.data)||r.message),d("Erro ao enviar as informações. Verifique os dados e tente novamente.")):(console.error("Erro inesperado:",r),d("Erro inesperado ao enviar as informações."))}finally{s(!1)}}}},w=()=>{const{ocoId:l}=g();console.log(l);const{formData:a,loading:i,error:c,handleChange:s,handleFileChange:m,handleSubmit:d}=h(Number(l));return e.jsx("div",{className:"bg-gray-50 py-10",children:e.jsxs("div",{className:"container mx-auto p-6 bg-white shadow-xl rounded-lg max-w-3xl",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6 text-center text-gray-800",children:"Informar sobre o Desaparecido"}),c&&e.jsx("p",{className:"text-red-500 text-center",children:c}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-lg text-gray-700 mb-2",htmlFor:"informacao",children:"Informações sobre a visualização"}),e.jsx("input",{type:"text",name:"informacao",id:"informacao",value:a.informacao,onChange:s,className:"border border-gray-300 p-3 w-full rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-lg text-gray-700 mb-2",htmlFor:"descricao",children:"Descrição do anexo"}),e.jsx("textarea",{name:"descricao",id:"descricao",value:a.descricao,onChange:s,className:"border border-gray-300 p-3 w-full rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-lg text-gray-700 mb-2",htmlFor:"data",children:"Data da visualização"}),e.jsx("input",{type:"date",name:"data",id:"data",value:a.data,onChange:s,className:"border border-gray-300 p-3 w-full rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-lg text-gray-700 mb-2",htmlFor:"foto",children:"Foto (se disponível)"}),e.jsx("input",{type:"file",name:"foto",id:"foto",accept:"image/*",onChange:m,className:"border border-gray-300 p-3 w-full rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"submit",className:"bg-blue-500 text-white p-4 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto",disabled:i,children:i?"Enviando...":"Enviar Informações"})})]})]})})};export{w as default};
